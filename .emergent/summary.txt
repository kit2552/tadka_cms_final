<analysis>**original_problem_statement:**
The initial request was to modify the AI prompts for content generation. This quickly evolved into a series of feature requests:
1.  Update all default AI prompts to incorporate a new process: if Reference Content URLs are provided, the AI should search and summarize them before generating the main content.
2.  Add a Split Content feature to the AI Agent form. This includes a toggle and a dropdown to select the number of paragraphs (2-4), with the backend prompts updated to instruct the AI to structure the output accordingly.
3.  Enhance the Image Options logic. When Use Web Search is selected, the AI should follow detailed instructions to find appropriate images based on the content type (e.g., movie posters/actors for movie news, politician photos for political news).
4.  Update UI labels in the :
    *   Ready to Publish -> Approved
    *   Auto Post -> Auto Publish
5.  Set Web Search as the default selection for the Image Option in the .
6.  **BUG FIX:** The Status filter in the Manage Content page's Posts tab is not working. It shows all content regardless of the selected status. This was reported twice.

**User's preferred language**: English

**what currently exists?**
The Tadka application is a full-stack News CMS. The AI agent creation form () has been significantly enhanced with several new features. The backend prompts () are now highly sophisticated, containing dynamic placeholders and instructions for:
-   Using reference content URLs.
-   Splitting content into multiple paragraphs.
-   Performing context-aware web searches for images.

The frontend form has been updated with new UI controls for these features and label changes as per user requests. A critical bug exists where the content filtering by status is broken.

**Last working item**:
-   Last item agent was working: The agent was tasked with fixing a bug where the status filter on the Manage Content page was not working correctly. The agent correctly identified that the backend data model () was missing a dedicated  field and was instead using boolean flags (, ), causing a mismatch with the frontend statuses (approved, in_review, etc.). The agent began to add a  field to the  but was interrupted by other user requests before completing the implementation. The user has reported this bug again.
-   Status: **IN PROGRESS**
-   Agent Testing Done: N
-   Which testing method agent to use? **both**. The backend logic in  and  needs to be fixed and tested. The frontend  needs to be tested with a frontend testing agent to ensure the filter works end-to-end.
-   User Testing Done: N

**All Pending/In progress Issue list**:
-   **Issue 1: (P0)** Manage Content Status Filter Not Working.

    -   **Attempted fixes:** The agent identified the root cause: a data model mismatch between frontend statuses and the backend's use of boolean flags. It started adding a  field to  but did not complete the fix across the application.
    -   **Next debug checklist:**
        1.  **Schema:** Ensure the  field is present in , , and  schemas in . Set a default value (e.g., 'draft').
        2.  **CRUD Function:** Modify the  function in . Remove the old logic based on  and . Instead, build a query that filters on the new  field (e.g., ). Ensure it handles the All case correctly (by not adding a status filter).
        3.  **API Endpoints:** Update all endpoints that create or modify articles (e.g., in ) to correctly set the  field. This includes mapping old concepts like published to the new status field.
        4.  **Data Migration (Consideration):** Existing articles in the database will not have the  field. The  function should be robust enough to handle articles with and without this field, or a one-time migration script might be needed. A simple approach is to treat articles without a  based on their  flag.
        5.  **Restart & Test:** Restart the backend and use the frontend testing agent to verify the fix on the Manage Content page.
    -   **Why fix this issue and what will be achieved with the fix?** This is a critical bug fix for a core CMS feature. It will allow users to correctly filter and manage their content workflow.
    -   **Status:** IN PROGRESS
    -   **Is recurring issue?** Y (User reported it twice)
    -   **Should Test frontend/backend/both after fix?** Both
    -   **Blocked on other issue:** None

**In progress Task List**:
-   None

**Upcoming and Future Tasks**
-   **Upcoming Tasks:**
    -   **(P1) Implement Core AI Content Generation Logic:** The UI and configuration are ready, but the backend service that executes the AI agents (runs the prompt against the selected model, uses reference URLs, and creates a draft post) is not yet implemented.
        -   **Files:**  (or a new dedicated service file), .
    -   **(P1) Implement Other Agent Types:** The agent selection modal includes Photo Gallery Agent and Review Agent as options, but their corresponding forms and backend logic have not been created.
        -   **Files:** Create  and ; update  to render them; create corresponding backend routes and CRUD functions.

**Completed work in this session**
-   **AI Prompt Enhancements ():**
    -   Updated all default AI prompts to utilize reference content URLs for summarization.
    -   Integrated Split Content instructions into all prompts.
    -   Added detailed, context-aware instructions for image web search to all prompts.
-   **Frontend Feature Additions ():**
    -   Added Split Content toggle and paragraph count selector.
    -   Set Web Search as the default image option.
-   **UI Label Updates ():**
    -   Changed workflow label from Ready to Publish to Approved.
    -   Changed workflow label from Auto Post to Auto Publish.

**Earlier issues found/mentioned but not fixed**
-   The status filter bug is the only one, and it is currently the highest priority item under .

**Known issue recurrence from previous fork**
-   None.

**Code Architecture**


**Key Technical Concepts**
-   **Frontend:** React, Tailwind CSS
-   **Backend:** FastAPI (Python)
-   **Database:** MongoDB
-   **Prompt Engineering:** Heavy use of dynamic f-strings and placeholders in Python to construct complex, context-aware prompts for an AI model.

**key DB schema**
-   **articles (collection):**
    -   The schema is evolving. It currently uses  and . A new  field is being added to support a more granular workflow ('draft', 'in_review', 'approved', 'published').

**changes in tech stack**
-   None

**All files of reference**
-   **Updated:**
    -   : Heavily modified to include enhanced logic for AI prompts (reference content, split content, image search). The  function needs to be fixed here.
    -   : Updated with new UI elements (Split Content) and label changes.
    -   : A  field was being added to the  schema. This work is incomplete.
-   **Important Files for Current Bug:**
    -   : Contains the status filter UI that is not working.
    -   : Contains the  endpoint that needs to correctly handle the status query parameter.

**Areas that need refactoring**:
-    has become even larger and more complex with the addition of new features. It urgently needs to be broken down into smaller, manageable child components.

**key api endpoints**
-   : (GET) This is the key endpoint for the current bug. It's supposed to filter articles by status but is failing.

**Critical Info for New Agent**
-   **PRIORITY ONE:** The user has reported the Status Filter bug twice. You must fix this before doing anything else. Do not get sidetracked by other requests until this bug is resolved and tested.
-   The agent was on the right track to fix the bug by adding a  field to the database schema. You must resume and complete this implementation across the backend (schema, CRUD, API endpoint) and then test it.

**documents created in this job**
-   None

**Last 10 User Messages and any pending user messages**
1.  **User:** Fix the priority 1 task (Movie News prompt). (Agent found it was already correct).
2.  **User:** Update prompts to use reference content URLs. (Completed).
3.  **User:** Add a Split Content feature. (Completed).
4.  **User:** Add detailed image web search instructions to prompts. (Completed).
5.  **User:** Change Ready to Publish label and fix the status filter bug. (Label changed, bug NOT fixed).
6.  **User:** Change Auto Post to Auto Publish and set web search as default image option. (Completed).
7.  **User:** **The status filter is still broken. Please fix it.** (**PENDING, HIGHEST PRIORITY**).

**Project Health Check:**
-   **Broken:** A core feature of the CMS, filtering content by status, is non-functional.
-   **Mocked:** None.

**3rd Party Integrations**
-   **OpenAI:** Configured for API key management (requires User API Key).
-   **Google Gemini:** Configured for API key management (requires User API Key).
-   **Anthropic Claude:** Configured for API key management (requires User API Key).

**Testing status**
-   **Testing agent used after significant changes:** NO
-   **Troubleshoot agent used after agent stuck in loop:** NO
-   **Test files created:** None
-   **Known regressions:** The status filter was likely working before (with fewer statuses) and is now broken due to new requirements not being fully implemented.

**Credentials to test flow:**
-   None provided. Admin access is assumed for CMS functionality.

**What agent forgot to execute**
-   The agent failed to complete the full implementation of the status filter bug fix. It started by editing the schema but was distracted by subsequent UI tweak requests and never finished the backend logic in  and , leaving the feature broken.</analysis>
